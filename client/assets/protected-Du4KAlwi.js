import{R as c,w,b as O,r as d,j as a}from"./chunk-EPOLDU6W-DDi5ovoi.js";import{B as p}from"./button-DkbTRq6R.js";var v={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},m=c.createContext&&c.createContext(v),_=["attr","size","title"];function P(e,t){if(e==null)return{};var r=z(e,t),n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function z(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f.apply(this,arguments)}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g(Object(r),!0).forEach(function(n){N(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function N(e,t,r){return t=C(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e){var t=E(e,"string");return typeof t=="symbol"?t:t+""}function E(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function j(e){return e&&e.map((t,r)=>c.createElement(t.tag,h({key:r},t.attr),j(t.child)))}function b(e){return t=>c.createElement(S,f({attr:h({},e.attr)},t),j(e.child))}function S(e){var t=r=>{var{attr:n,size:o,title:i}=e,u=P(e,_),l=o||r.size||"1em",s;return r.className&&(s=r.className),e.className&&(s=(s?s+" ":"")+e.className),c.createElement("svg",f({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,u,{className:s,style:h(h({color:e.color||r.color},r.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&c.createElement("title",null,i),e.children)};return m!==void 0?c.createElement(m.Consumer,null,r=>t(r)):t(v)}function $(e){return b({attr:{viewBox:"0 0 488 512"},child:[{tag:"path",attr:{d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"},child:[]}]})(e)}function k(e){return b({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M217 28.098v455.804l142-42.597V70.697zm159.938 26.88l.062 2.327V87h16V55zM119 55v117.27h18V73h62V55zm258 50v16h16v-16zm0 34v236h16V139zm-240 58.727V233H41v46h96v35.273L195.273 256zM244 232c6.627 0 12 10.745 12 24s-5.373 24-12 24-12-10.745-12-24 5.373-24 12-24zM137 339.73h-18V448h18zM377 393v14h16v-14zm0 32v23h16v-23zM32 471v18h167v-18zm290.652 0l-60 18H480v-18z"},child:[]}]})(e)}async function G(e){const t="https://us-west-2.recall.ai/api/v1/calendar/authenticate/",r={method:"POST",headers:{accept:"application/json","content-type":"application/json",Authorization:"Token ad31860ce0289f714ef10e10bf2bebb496ab9f5f"},body:JSON.stringify({user_id:e})},n=await fetch(t,r);if(!n.ok)throw new Error(n.statusText);return await n.json()}function T(e,t="465891640758-8c23jlclq1bjbcqchv10ie6k0il8uh0c.apps.googleusercontent.com",r="https://accounts.google.com/o/oauth2/v2/auth?",n=["https://www.googleapis.com/auth/calendar.events.readonly","https://www.googleapis.com/auth/userinfo.email"],o="offline",i="consent",u="true",l="code",s="https://us-west-2.recall.ai/api/v1/calendar/google_oauth_callback/"){const x=n.join(" "),y=JSON.stringify(e);return`
			${r}
			scope=${x}
			&access_type=${o}
			&prompt=${i}
			&include_granted_scopes=${u}
			&response_type=${l}
			&state=${y}
			&redirect_uri=${s}
			&client_id=${t}
		`}const M=w(function(){let t=O();const[r,n]=d.useState();async function o(){const u={recall_calendar_auth_token:(await G(t.user.id)).token,google_oauth_redirect_url:"https://us-west-2.recall.ai/api/v1/calendar/google_oauth_callback/",success_url:`${window.location.origin}/gcal/success`},l=T(u);n(l)}return d.useEffect(()=>{o()},[]),r==null?a.jsxs("div",{className:"flex flex-col items-center justify-center h-screen gap-2",children:[a.jsxs("p",{children:["Hello ",a.jsx("span",{className:"text-primary font-semibold",children:t.user.email})]}),a.jsx("p",{children:"Generating Calendar Auth Token..."}),a.jsx("a",{href:"/logout",children:a.jsx(p,{children:"Logout"})})]}):a.jsxs("div",{className:"flex flex-col items-center justify-center h-screen gap-2 p-5",children:[a.jsxs("p",{className:"text-xl",children:["User: ",a.jsx("span",{className:"text-primary font-semibold",children:t.user.email})]}),a.jsx("div",{className:"flex-1"}),a.jsx("a",{href:r,children:a.jsxs(p,{children:[" ",a.jsx($,{})," Link Google Calendar "]})}),a.jsx("div",{className:"flex-1"}),a.jsx("a",{href:"/logout",children:a.jsxs(p,{children:[" ",a.jsx(k,{})," Logout"]})})]})});export{G,M as _};
